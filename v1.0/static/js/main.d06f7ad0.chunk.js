(this["webpackJsonpblockchain-react"]=this["webpackJsonpblockchain-react"]||[]).push([[0],{357:function(e){e.exports=JSON.parse('{"a":[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"auctionId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"landscapeId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"minPrice","type":"uint256"}],"name":"AuctionCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"auctionId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"landscapeId","type":"uint256"},{"indexed":false,"internalType":"address","name":"oldOwner","type":"address"},{"indexed":false,"internalType":"address","name":"newOwner","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"AuctionFinished","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"auctionId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"landscapeId","type":"uint256"},{"indexed":false,"internalType":"address","name":"bidder","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"time","type":"uint256"}],"name":"BidCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"winner","type":"address"},{"indexed":false,"internalType":"address","name":"resolver","type":"address"}],"name":"LandscapeLotteryFinished","type":"event"},{"anonymous":false,"inputs":[],"name":"LandscapeLotteryNewParticipant","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"nrOfParticipants","type":"uint256"}],"name":"LandscapeLotterySharesPurchased","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"landscapeId","type":"uint256"},{"indexed":false,"internalType":"string","name":"newName","type":"string"}],"name":"LandscapeNameChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"landscapeId","type":"uint256"},{"indexed":false,"internalType":"address","name":"oldOwner","type":"address"},{"indexed":false,"internalType":"address","name":"newOwner","type":"address"},{"indexed":false,"internalType":"uint256","name":"time","type":"uint256"}],"name":"LandscapeTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"landscapeId","type":"uint256"},{"indexed":false,"internalType":"string","name":"name","type":"string"},{"indexed":false,"internalType":"uint256","name":"dna","type":"uint256"}],"name":"NewLandscape","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"addr","type":"address"}],"name":"PendingWithdrawalChanged","type":"event"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"auctions","outputs":[{"internalType":"uint256","name":"auctionId","type":"uint256"},{"internalType":"uint256","name":"endDate","type":"uint256"},{"internalType":"bool","name":"running","type":"bool"},{"internalType":"address payable","name":"highestBidder","type":"address"},{"internalType":"uint256","name":"highestBid","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"uint256","name":"_landscapeId","type":"uint256"}],"name":"bid","outputs":[],"stateMutability":"payable","type":"function","payable":true},{"inputs":[{"internalType":"uint256","name":"_landscapeId","type":"uint256"},{"internalType":"string","name":"_newName","type":"string"}],"name":"changeName","outputs":[],"stateMutability":"payable","type":"function","payable":true},{"inputs":[{"internalType":"uint256","name":"_landscapeId","type":"uint256"}],"name":"endAuction","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getAvailableWithdrawals","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"getLandscapeCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"getLatestParticipant","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"getMyBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"getMyShares","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"getParticipants","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"getTotalAmountOfShares","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"isParticipating","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"landscapeToOwner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"landscapes","outputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"dna","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"lotteryParticipants","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"participate","outputs":[],"stateMutability":"payable","type":"function","payable":true},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"resolve","outputs":[],"stateMutability":"payable","type":"function","payable":true},{"inputs":[{"internalType":"uint256","name":"_fee","type":"uint256"}],"name":"setNameChangeFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_landscapeId","type":"uint256"},{"internalType":"uint256","name":"_endDate","type":"uint256"},{"internalType":"uint256","name":"_minPrice","type":"uint256"}],"name":"startAuction","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_landscapeId","type":"uint256"},{"internalType":"address","name":"_newOwner","type":"address"}],"name":"transferLandscape","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_newName","type":"string"}],"name":"withDrawLandscape","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getLandscapes","outputs":[{"components":[{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"dna","type":"uint256"},{"internalType":"address","name":"owner","type":"address"},{"components":[{"internalType":"uint256","name":"auctionId","type":"uint256"},{"internalType":"uint256","name":"endDate","type":"uint256"},{"internalType":"bool","name":"running","type":"bool"},{"internalType":"address payable","name":"highestBidder","type":"address"},{"internalType":"uint256","name":"highestBid","type":"uint256"}],"internalType":"struct AuctionableLandscape.Auction","name":"auction","type":"tuple"}],"internalType":"struct FetchableLandscape.LandscapeWithOwner[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"uint256","name":"landscapeId","type":"uint256"}],"name":"getLandscape","outputs":[{"components":[{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"dna","type":"uint256"},{"internalType":"address","name":"owner","type":"address"},{"components":[{"internalType":"uint256","name":"auctionId","type":"uint256"},{"internalType":"uint256","name":"endDate","type":"uint256"},{"internalType":"bool","name":"running","type":"bool"},{"internalType":"address payable","name":"highestBidder","type":"address"},{"internalType":"uint256","name":"highestBid","type":"uint256"}],"internalType":"struct AuctionableLandscape.Auction","name":"auction","type":"tuple"}],"internalType":"struct FetchableLandscape.LandscapeWithOwner","name":"","type":"tuple"}],"stateMutability":"view","type":"function","constant":true}]}')},381:function(e,t,n){},382:function(e,t,n){},386:function(e,t,n){},387:function(e,t,n){},433:function(e,t){},442:function(e,t){},460:function(e,t){},462:function(e,t){},479:function(e,t){},480:function(e,t){},543:function(e,t){},545:function(e,t){},554:function(e,t){},556:function(e,t){},581:function(e,t){},583:function(e,t){},584:function(e,t){},590:function(e,t){},603:function(e,t){},615:function(e,t){},618:function(e,t){},623:function(e,t){},631:function(e,t){},634:function(e,t){},694:function(e,t,n){},793:function(e,t,n){},810:function(e,t,n){},811:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(45),s=n.n(c),i=(n(377),n(18)),o=(n(381),n(828)),d=n(140),u=n(37),l=n(146),p=n(65),h=Object(p.b)({name:"landscapes",initialState:{landscapes:[],loading:!0,uiState:{}},reducers:{setLandscapes:function(e,t){var n=t.payload;e.landscapes=n},updateLandscape:function(e,t){var n=t.payload;e.landscapes[Number(n.landscapeId)]=n},finishLandscapesLoading:function(e){e.loading=!1},startLandscapesLoading:function(e){e.loading=!0},setBidHistory:function(e,t){var n=t.payload,a=n.landscapeId,r=n.bids;e.landscapes[Number(a)].auction.bids=r},addAuctionBid:function(e,t){var n=t.payload,a=n.auctionId,r=n.landscapeId,c=n.bidder,s=n.amount,i=n.time;e.landscapes[Number(r)].auction.bids.unshift({auctionId:a,landscapeId:r,bidder:c,amount:s,time:i})},setOwnerHistory:function(e,t){var n=t.payload,a=n.landscapeId,r=n.ownerHistory;e.landscapes[Number(a)].ownerHistory=Object(l.a)(r)},setLandscapeUiState:function(e,t){var n=t.payload,a=n.landscapeId,r=n.topic,c=n.value;e.uiState[Number(a)]=Object(u.a)(Object(u.a)({},e.uiState[a]),{},Object(d.a)({},r,c))}}}),b=h.actions,j=b.updateLandscape,f=b.setLandscapes,y=b.addAuctionBid,m=b.finishLandscapesLoading,O=b.setLandscapeUiState,x=b.startLandscapesLoading,w=b.setBidHistory,v=b.setOwnerHistory,g=h.reducer;function k(e){var t=Object(i.c)((function(e){return e.landscapes})),n=t.landscapes,r=t.loading;return{myLandscapes:Object(a.useMemo)((function(){return n.filter((function(t){var n;return(null===(n=t.owner)||void 0===n?void 0:n.toLowerCase())===(null===e||void 0===e?void 0:e.toLowerCase())}))}),[n,e]),loading:r}}function T(e){return Object(a.useMemo)((function(){return e.filter((function(e){return!0===e.auction.running}))}),[e])}function I(e,t){var n=Object(i.b)(),r=Object(i.c)((function(t){return t.landscapes.uiState[e]})),c=Object(a.useCallback)((function(){n(O({landscapeId:e,topic:t,value:!0}))}),[n,e,t]),s=Object(a.useCallback)((function(){n(O({landscapeId:e,topic:t,value:!1}))}),[n,e,t]);return[null!=r&&(r[t]||!1),c,s]}function L(e){window.location.href="#"+encodeURIComponent(window.btoa(JSON.stringify(e)))}n(382);var S=n(368),A=n(2),C=n(385);function M(e){for(var t=e.dna,n=e.style,a="",r=[],c=0;c<16;c+=2)2===c||4===c?(r.push(+t.substring(c,c+1)),r.push(+t.substring(c+1,c+2))):r.push(+t.substring(c,c+2));switch(r[0]){case 10:a="images/Sunrise.svg";break;case 11:a="images/City.svg";break;case 12:a="images/Galaxy.svg";break;case 13:a="images/Farm.svg";break;case 14:a="images/Fantasy.svg";break;case 15:a="images/PillarsOfCreation.svg";break;case 16:a="images/Mars.svg";break;default:throw new Error("invalid image "+r[0])}var s=["red","orange","yellow","green","blue","purple","pink","monochrome"],i=C({count:8,hue:s[r[1]%8],seed:r[3]}),o=C({count:2,hue:s[r[2]%8],seed:r[4]}),d="nft_"+Math.random().toString(36).substr(2,5);return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(S.a,{className:d,src:a,style:n}),Object(A.jsx)("style",{dangerouslySetInnerHTML:{__html:["."+d+" .background-1 {","  stop-color: "+o[0]+" !important;","}","."+d+" .background-2 {","  stop-color: "+o[1]+" !important;","}","."+d+" .feature-1 {","  fill: "+i[0]+" !important;","}","."+d+" .feature-2 {","  fill: "+i[1]+" !important;","}","."+d+" .feature-3 {","  fill: "+i[2]+" !important;","}","."+d+" .feature-4 {","  fill: "+i[3]+" !important;","}","."+d+" .feature-5 {","  fill: "+i[4]+" !important;","}","."+d+"> svg {","width: 100%; height: 100%","}"].join("\n")}})]})}n(386);function N(e){var t=e.landscape,n=t.name,a=t.landscapeId,r=t.dna;return Object(A.jsxs)("div",{className:"landscape-card",onClick:function(){L({keyword:"landscape-detail",landscapeId:a})},children:[Object(A.jsx)(M,{dna:r}),Object(A.jsx)("h2",{className:"landscape-title",children:n})]})}n(387);function W(e){var t=e.landscapes;return Object(A.jsx)("div",{className:"landscapes-list",children:t.map((function(e){return Object(A.jsx)(N,{landscape:e},e.landscapeId)}))})}function B(e){var t=e.address,n=k(t),a=n.myLandscapes;return n.loading?Object(A.jsx)(o.a,{size:"lg",center:!0}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("h2",{children:["Landscapes of ",t]}),Object(A.jsx)(W,{landscapes:a})]})}function E(){var e=Object(i.c)((function(e){return e.landscapes})),t=e.landscapes,n=e.loading,a=T(t);return n?Object(A.jsx)(o.a,{size:"lg",center:!0}):Object(A.jsx)(W,{landscapes:a})}function P(){var e=Object(i.c)((function(e){return e.landscapes})),t=e.landscapes;return e.loading?Object(A.jsx)(o.a,{size:"lg",center:!0}):Object(A.jsx)(W,{landscapes:t})}var D=n(8),F=n.n(D),H=n(16),z=n(835),_=n(15),U=n(19),R=n(81),Y=n.n(R),J=n(357),V={keyword:"my-landscapes"},q=Object(p.b)({name:"app",initialState:{initialized:!1,navState:function(){try{var e=window.location.hash;e.startsWith("#")&&(e=e.substring(1));var t=JSON.parse(window.atob(decodeURIComponent(e)));return t.keyword?t:V}catch(n){return V}}(),ethAddress:null,owner:!1,error:null,withdrawableEth:0,isWithdrawing:!1},reducers:{finishInit:function(e){e.initialized=!0},appNavigate:function(e,t){var n=t.payload;e.navState=Object(u.a)({},n)},setMyETHAddress:function(e,t){var n=t.payload;e.ethAddress=n},setOwner:function(e,t){var n=t.payload;e.owner=n},setAppError:function(e,t){var n=t.payload;e.error=n},setWithDrawableEth:function(e,t){var n=t.payload;e.withdrawableEth=n},setIsWithdrawing:function(e,t){var n=t.payload;e.isWithdrawing=n}}}),G=q.actions,K=G.finishInit,Q=G.appNavigate,X=G.setMyETHAddress,Z=G.setOwner,$=G.setAppError,ee=G.setWithDrawableEth,te=G.setIsWithdrawing,ne=q.reducer,ae=Object(p.b)({name:"lottery",initialState:{participating:!1,locked:!1,myShares:0,totalShares:0,participants:[],availableWinWithdrawals:0,showWithdrawModal:!1,withdrawLocked:!1,selectedShares:1},reducers:{addParticipation:function(e){e.participating=!0},delParticipation:function(e){e.participating=!1},lockLottery:function(e){e.locked=!0},unlockLottery:function(e){e.locked=!1},lockAdminLottery:function(e){e.adminLocked=!0},unlockAdminLottery:function(e){e.adminLocked=!1},setMyShares:function(e,t){var n=t.payload;e.myShares=n},setTotalShares:function(e,t){var n=t.payload;e.totalShares=n},setParticipants:function(e,t){var n=t.payload;e.participants=n},addLatestParticipant:function(e,t){var n=t.payload;e.participants.includes(n)||(e.participants=[].concat(Object(l.a)(e.participants),[n]))},setAvailableWinWithdrawals:function(e,t){var n=t.payload;e.availableWinWithdrawals=Number(n)},setShowWithdrawModal:function(e,t){var n=t.payload;e.showWithdrawModal=n},lockWithdraw:function(e){e.withdrawLocked=!0},unlockWithdraw:function(e){e.withdrawLocked=!1},setSelectedShares:function(e,t){var n=t.payload;e.selectedShares=n}}}),re=ae.actions,ce=re.delParticipation,se=re.addParticipation,ie=re.lockLottery,oe=re.unlockLottery,de=re.lockAdminLottery,ue=re.unlockAdminLottery,le=re.setMyShares,pe=re.setTotalShares,he=re.setParticipants,be=re.addLatestParticipant,je=re.setAvailableWinWithdrawals,fe=re.setShowWithdrawModal,ye=re.lockWithdraw,me=re.unlockWithdraw,Oe=re.setSelectedShares,xe=ae.reducer,we=Object(p.a)({reducer:{landscapes:g,app:ne,lottery:xe}}),ve=we;window.onhashchange=function(e){return console.log(e)},window.onhashchange=function(e){var t=e.newURL.split("#",2);2===t.length&&we.dispatch(Q(JSON.parse(window.atob(decodeURIComponent(t[1])))))};var ge=n(829),ke=n(830);function Te(e){var t=e.children,n=e.landscapeId;return Object(A.jsx)("a",{href:"#"+n,onClick:function(e){e.preventDefault(),ve.dispatch(Q({keyword:"landscape-detail",landscapeId:n}))},children:t})}function Ie(e){ke.a.info({title:"You received a new landscape",duration:5e3,description:Object(A.jsxs)(Te,{landscapeId:e.landscapeId,children:[Object(A.jsx)(M,{dna:e.dna}),Object(A.jsx)("p",{children:e.name})]})})}function Le(e){ke.a.info({title:"New auction",duration:5e3,description:Object(A.jsxs)(Te,{landscapeId:e.landscapeId,children:[Object(A.jsx)(M,{dna:e.dna}),Object(A.jsx)("p",{children:"Landscape available for auction"})]})})}function Se(e){ke.a.info({title:"You have been outbid!",duration:5e3,description:Object(A.jsxs)(Te,{landscapeId:e.landscapeId,children:["Your previous bid on ",e.name," was outbid"]})})}var Ae=function(){function e(){var t=this;Object(_.a)(this,e),this.init=Object(H.a)(F.a.mark((function e(){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.initialized){e.next=2;break}return e.abrupt("return");case 2:if(window.ethereum){e.next=5;break}return ve.dispatch($("No accessible Etherum wallet found.<br> Install MetaMask https://metamask.io/")),e.abrupt("return");case 5:return t.web3=new Y.a(window.ethereum),e.next=8,window.ethereum.enable();case 8:return t.contract=new t.web3.eth.Contract(J.a,"0x90926E45c3f2de3B0C617F0ec86679D81E5D19af"),e.next=11,t.web3.eth.requestAccounts();case 11:n=e.sent,t.refreshAccount(n),window.ethereum.on("accountsChanged",t.refreshAccount),t.initListeners(),ve.dispatch(K()),t.initialized=!0;case 17:case"end":return e.stop()}}),e)}))),this.refreshAccount=function(){var e=Object(H.a)(F.a.mark((function e(n){var a,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.account=n[0],console.log("myAccount",t.account),e.next=4,t.contract.methods.owner().call();case 4:if(a=e.sent,console.log("ownerAccount",a),a.toLowerCase()!==t.account.toLowerCase()){e.next=14;break}return ve.dispatch(Z(!0)),e.next=10,t.loadParticipants();case 10:r=e.sent,ve.dispatch(he(r)),e.next=15;break;case 14:ve.dispatch(Z(!1));case 15:t.loadInitialData();case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.convertWeiToEth=function(e){return Y.a.utils.fromWei(e.toString(),"ether")},this.loadInitialData=Object(H.a)(F.a.mark((function e(){var n,a,r,c,s;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ve.dispatch(X(t.account)),ve.dispatch(x()),e.next=4,t.loadAllLandscapes();case 4:return n=e.sent,ve.dispatch(f(n)),ve.dispatch(m()),e.next=9,t.loadAvailableNftWithdrawals();case 9:return a=e.sent,ve.dispatch(je(a)),e.next=13,t.loadWithdrawableEth();case 13:return r=e.sent,ve.dispatch(ee(Y.a.utils.fromWei(r))),e.next=17,t.loadLotteryParticipation();case 17:if(!e.sent){e.next=29;break}return e.next=20,t.loadTotalShares();case 20:return c=e.sent,e.next=23,t.loadMyShares();case 23:s=e.sent,ve.dispatch(le(s)),ve.dispatch(pe(c)),ve.dispatch(se()),e.next=30;break;case 29:ve.dispatch(ce());case 30:case"end":return e.stop()}}),e)}))),this.loadWithdrawableEth=Object(H.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.contract.methods.getMyBalance().call({from:t.account}));case 1:case"end":return e.stop()}}),e)}))),this.loadWithdrawableEth=Object(H.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.contract.methods.getMyBalance().call({from:t.account}));case 1:case"end":return e.stop()}}),e)}))),this.loadAllLandscapes=Object(H.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.contract.methods.getLandscapes().call();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return e.abrupt("return",e.t0.map(t.transformLandscape));case 6:case"end":return e.stop()}}),e)}))),this.loadLandscape=function(){var e=Object(H.a)(F.a.mark((function e(n){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,t.contract.methods.getLandscape(n).call();case 3:return e.t1=e.sent,e.t2=n,e.abrupt("return",e.t0.transformLandscape.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.transformLandscape=function(e,t){return{name:e.name,landscapeId:t,dna:e.dna,owner:e.owner,auction:{auctionId:Number(e.auction.auctionId),highestBid:e.auction.highestBid,highestBidder:e.auction.highestBidder,endDate:Number(e.auction.endDate),running:e.auction.running,bids:[]},ownerHistory:[]}},this.triggerDetailLoad=function(){var e=Object(H.a)(F.a.mark((function e(n,a){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=ve,e.t1=w,e.t2=n,e.next=5,t.loadBidHistory(a);case 5:return e.t3=e.sent,e.t4={landscapeId:e.t2,bids:e.t3},e.t5=(0,e.t1)(e.t4),e.t0.dispatch.call(e.t0,e.t5),e.t6=ve,e.t7=v,e.t8=n,e.next=14,t.loadOwnerHistory(n);case 14:e.t9=e.sent,e.t10={landscapeId:e.t8,ownerHistory:e.t9},e.t11=(0,e.t7)(e.t10),e.t6.dispatch.call(e.t6,e.t11);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.loadBidHistory=function(){var e=Object(H.a)(F.a.mark((function e(n){var a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.contract.getPastEvents("BidCreated",{fromBlock:0,toBlock:"latest",filter:{auctionId:n+""}});case 2:return a=e.sent,e.abrupt("return",(a||[]).map((function(e){var t=e.returnValues,n=t.auctionId,a=t.landscapeId,r=t.bidder,c=t.amount,s=t.time;return{auctionId:n,landscapeId:a,bidder:r,amount:Number(c),time:Number(s)}})).reverse());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.loadOwnerHistory=function(){var e=Object(H.a)(F.a.mark((function e(n){var a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.contract.getPastEvents("LandscapeTransferred",{fromBlock:0,toBlock:"latest",filter:{landscapeId:n+""}});case 2:return a=e.sent,e.abrupt("return",(a||[]).map((function(e){var t=e.returnValues,n=t.landscapeId,a=t.newOwner,r=t.oldOwner,c=t.time;return{landscapeId:n,newOwner:a,oldOwner:r,time:Number(c)}})).reverse());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.initListeners=function(){console.log("registered listeners"),t.contract.events.NewLandscape().on("data",Me(function(){var e=Object(H.a)(F.a.mark((function e(n){var a,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.landscapeId,n.owner,e.next=3,t.loadLandscape(a);case 3:r=e.sent,ve.dispatch(j(r)),r.owner===t.account&&Ie(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).on("error",console.error),t.contract.events.LandscapeLotteryFinished().on("data",Me(function(){var e=Object(H.a)(F.a.mark((function e(n){var a,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.winner,n.resolver,console.log("LandscapeLotteryFinished. Winner was: ",a),ve.dispatch(pe(0)),ve.dispatch(le(0)),ve.dispatch(he([])),ve.dispatch(ce()),a.toLowerCase()!==t.account.toLowerCase()){e.next=14;break}return e.next=9,t.loadAvailableNftWithdrawals();case 9:r=e.sent,ve.dispatch(je(r)),ve.dispatch(fe(!0)),e.next=15;break;case 14:ke.a.info({title:"Lottery has concluded",duration:2e3,description:Object(A.jsx)("p",{style:{width:320},rows:3,children:"Unfortunately, you did not win!"})});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).on("changed",(function(e){console.log(e)})).on("error",console.error),t.contract.events.PendingWithdrawalChanged().on("data",Me(function(){var e=Object(H.a)(F.a.mark((function e(n){var a,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.addr,t.account!==a){e.next=6;break}return e.next=4,t.loadWithdrawableEth();case 4:r=e.sent,ve.dispatch(ee(Y.a.utils.fromWei(r)));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).on("error",console.error),t.contract.events.AuctionCreated().on("data",Me(function(){var e=Object(H.a)(F.a.mark((function e(n){var a,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.landscapeId,e.next=3,t.loadLandscape(a);case 3:r=e.sent,ve.dispatch(j(r)),t.account!==r.owner&&Le(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).on("error",console.error),t.contract.events.BidCreated().on("data",Me(function(){var e=Object(H.a)(F.a.mark((function e(n){var a,r,c,s,i,o,d;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.auctionId,r=n.landscapeId,c=n.bidder,s=n.amount,i=n.time,(o=ve.getState().landscapes.landscapes[Number(r)]).auction.bids.length>0&&o.auction.bids[0].bidder===t.account&&Se(o),ve.dispatch(j(Object(u.a)(Object(u.a)({},o),{},{auction:Object(u.a)(Object(u.a)({},o.auction),{},{highestBid:s,highestBidder:c})}))),ve.dispatch(y({auctionId:a,landscapeId:r,bidder:c,amount:s,time:i})),e.next=7,t.loadWithdrawableEth();case 7:d=e.sent,ve.dispatch(ee(Y.a.utils.fromWei(d)));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).on("error",console.error),t.contract.events.AuctionFinished().on("data",Me(function(){var e=Object(H.a)(F.a.mark((function e(n){var a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.landscapeId,e.t0=ve,e.t1=j,e.next=5,t.loadLandscape(a);case 5:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.t0.dispatch.call(e.t0,e.t3),console.log("AuctionFinished ",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).on("error",console.error),t.contract.events.LandscapeNameChanged().on("data",Me((function(e){var t=e.landscapeId,n=e.newName,a=ve.getState().landscapes.landscapes[Number(t)];ve.dispatch(j(Object(u.a)(Object(u.a)({},a),{},{name:n})))}))).on("error",console.error),t.contract.events.LandscapeTransferred().on("data",Me((function(e){var n=e.landscapeId,a=e.newOwner,r=ve.getState().landscapes.landscapes[Number(n)];ve.dispatch(j(Object(u.a)(Object(u.a)({},r),{},{owner:a}))),a===t.account&&Ie(r)}))).on("error",console.error),t.contract.events.LandscapeLotterySharesPurchased().on("data",Me((function(e){var t=e.nrOfParticipants;ve.dispatch(pe(t))}))).on("error",console.error),t.contract.events.LandscapeLotteryNewParticipant().on("data",Me((function(){t.loadLatestParticipant().then((function(e){return ve.dispatch(be(e))}))}))).on("error",console.error)},this.loadAvailableNftWithdrawals=Object(H.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.contract.methods.getAvailableWithdrawals().call({from:t.account});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.loadLatestParticipant=Object(H.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.contract.methods.getLatestParticipant().call({from:t.account});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.loadParticipants=Object(H.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.contract.methods.getParticipants().call({from:t.account});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.loadMyShares=Object(H.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.contract.methods.getMyShares().call({from:t.account});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.loadTotalShares=Object(H.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.contract.methods.getTotalAmountOfShares().call({from:t.account});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.loadLotteryParticipation=Object(H.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.contract.methods.isParticipating().call({from:t.account});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.resolveLottery=Object(H.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ve.dispatch(de()),e.prev=1,e.next=4,t.contract.methods.resolve().send({from:t.account});case 4:return e.prev=4,ve.dispatch(ue()),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[1,,4,7]])}))),this.collectNFT=function(){var e=Object(H.a)(F.a.mark((function e(n){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.contract.methods.withDrawLandscape(n).send({from:t.account});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.withdraw=Object(H.a)(F.a.mark((function e(){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ve.dispatch(te(!0)),e.next=3,t.contract.methods.withdraw().send({from:t.account});case 3:return ve.dispatch(te(!1)),e.next=6,t.loadWithdrawableEth();case 6:n=e.sent,ve.dispatch(ee(Y.a.utils.fromWei(n)));case 8:case"end":return e.stop()}}),e)}))),this.participateLottery=function(){var e=Object(H.a)(F.a.mark((function e(n){var a,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ve.dispatch(ie()),e.prev=1,a=(5e-4*n).toFixed(4),e.next=5,t.contract.methods.participate(n).send({from:t.account,value:t.web3.utils.toWei(String(a),"ether")});case 5:return ve.dispatch(se()),e.next=8,t.loadMyShares();case 8:r=e.sent,ve.dispatch(le(r));case 10:return e.prev=10,ve.dispatch(oe()),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,,10,13]])})));return function(t){return e.apply(this,arguments)}}(),this.bid=function(){var e=Object(H.a)(F.a.mark((function e(n,a){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ce(n,"processingAuctionBid",Object(H.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.contract.methods.bid(n+"").send({from:t.account,value:t.web3.utils.toWei(a+"","ether")});case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.endAuction=function(){var e=Object(H.a)(F.a.mark((function e(n){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ce(n,"processingAuctionEnd",Object(H.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.contract.methods.endAuction(n+"").send({from:t.account});case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.startAuction=function(){var e=Object(H.a)(F.a.mark((function e(n,a,r){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ce(n,"processingAuctionStart",Object(H.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.contract.methods.startAuction(n+"",a+"",t.web3.utils.toWei(r,"ether")).send({from:t.account});case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),this.changeName=function(){var e=Object(H.a)(F.a.mark((function e(n,a){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=a){e.next=2;break}return e.abrupt("return");case 2:Ce(n,"processingNameChange",Object(H.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.contract.methods.changeName(n,a).send({from:t.account,value:t.web3.utils.toWei("0.0005","ether")});case 2:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.transferOwnership=function(){var e=Object(H.a)(F.a.mark((function e(n,a){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ce(n,"processingOwnershipTransfer",Object(H.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.contract.methods.transferLandscape(n,a).send({from:t.account});case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.collectWin=function(){var e=Object(H.a)(F.a.mark((function e(n){var a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ve.dispatch(ye()),e.next=3,t.collectNFT(n);case 3:return e.next=5,t.loadAvailableNftWithdrawals();case 5:a=e.sent,ve.dispatch(je(a)),ve.dispatch(me());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}return Object(U.a)(e,[{key:"isValidAddress",value:function(e){return this.web3.utils.isAddress(e)}},{key:"getMyAddress",value:function(){return this.account}}]),e}(),Ce=function(){var e=Object(H.a)(F.a.mark((function e(t,n,a){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ve.dispatch(O({landscapeId:t,topic:n,value:!0})),e.prev=1,e.next=4,a();case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),e.t0;case 9:return e.prev=9,ve.dispatch(O({landscapeId:t,topic:n,value:!1})),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})));return function(t,n,a){return e.apply(this,arguments)}}(),Me=function(e){var t={};return function(n){clearTimeout(t[n.transactionHash+n.transactionLogIndex]),t[n.transactionHash+n.transactionLogIndex]=setTimeout((function(){e(n.returnValues),delete t[n.transactionHash+n.transactionLogIndex]}),200)}},Ne=new Ae;function We(e){var t=e.address;return Object(A.jsx)("a",{href:"#account-"+t,onClick:function(e){e.preventDefault(),L({keyword:"account-detail",address:t})},children:t})}var Be=n(24),Ee=n(80),Pe=n(831),De=n(818),Fe=n(826),He=n(833),ze=n(834),_e=n(47),Ue=n(827),Re=function(e,t){var n=1e3*e-Date.now();if(n<=0)return t;var a=Math.floor(n/864e5),r=n%864e5,c=Math.floor(r/36e5),s=r%36e5,i=Math.round(s/6e4),o="";return a>0&&(o+=a+" days "),c>0&&(o+=c+" hours "),i>0&&(o+=i+" minutes "),0===a&&0===c&&0===i&&(o+="Few moments"),o.trim()+" remaining"};function Ye(e){var t=e.pointInTimeSeconds,n=e.ifFinished,r=Object(a.useState)(""),c=Object(Be.a)(r,2),s=c[0],i=c[1];return Object(a.useEffect)((function(){i(Re(t,n));var e=setInterval((function(){return i(Re(t,n))}),6e4);return function(){clearInterval(e)}}),[t,n]),Object(A.jsx)("span",{children:s})}n(694);var Je=n(823),Ve=n(832);function qe(e){var t=e.setShowModal,n=e.showModal,r=e.landscape,c=Object(a.useState)(5),s=Object(Be.a)(c,2),i=s[0],o=s[1],d=Object(a.useState)(.001),u=Object(Be.a)(d,2),l=u[0],p=u[1];return Object(A.jsxs)(Je.a,{show:n,onHide:function(){return t(!1)},size:"xs",children:[Object(A.jsx)(Je.a.Header,{children:Object(A.jsx)(Je.a.Title,{children:"Create a new Auction"})}),Object(A.jsx)(Je.a.Body,{children:Object(A.jsxs)(Pe.a,{fluid:!0,children:[Object(A.jsxs)(De.a,{children:[Object(A.jsx)(Ve.a,{children:"Duration in Minutes"}),Object(A.jsx)(Fe.a,{value:i,step:1,onChange:o,min:1})]}),Object(A.jsxs)(De.a,{children:[Object(A.jsx)(Ve.a,{children:"Startprice"}),Object(A.jsx)(Fe.a,{value:l,step:.001,onChange:p,min:.001})]})]})}),Object(A.jsxs)(Je.a.Footer,{children:[Object(A.jsx)(Ee.a,{appearance:"primary",type:"submit",onClick:function(){t(!1);var e,n=60*i;Ne.startAuction(r.landscapeId,(e=Date.now(),Math.floor(e/1e3)+n),l+"")},children:"Submit"}),Object(A.jsx)(Ee.a,{onClick:function(){return t(!1)},appearance:"subtle",children:"Cancel"})]})]})}function Ge(e){var t=e.landscape,n=e.isUserOwner,r=function(){var e=Number(Ne.convertWeiToEth(s.highestBid));return Number((e+.001).toFixed(3))},c=Object(i.c)((function(e){return e.app.ethAddress})),s=t.auction,d=Object(i.c)((function(e){return e.landscapes.landscapes[Number(t.landscapeId)].auction.highestBid})),u=Object(i.c)((function(e){return e.landscapes.landscapes[Number(t.landscapeId)].auction.highestBidder})),l=Object(i.c)((function(e){return e.landscapes.landscapes[Number(t.landscapeId)].auction.endDate})),p=Object(a.useState)(r()),h=Object(Be.a)(p,2),b=h[0],j=h[1],f=Object(a.useState)(),y=Object(Be.a)(f,2),m=y[0],O=y[1],x=Object(a.useState)(null),w=Object(Be.a)(x,2),v=w[0],g=w[1],k=I(t.landscapeId,"processingAuctionStart"),T=Object(Be.a)(k,1)[0],L=I(t.landscapeId,"processingAuctionEnd"),S=Object(Be.a)(L,1)[0],C=I(t.landscapeId,"processingAuctionBid"),M=Object(Be.a)(C,1)[0],N=Object(a.useState)(!1),W=Object(Be.a)(N,2),B=W[0],E=W[1];Object(a.useEffect)((function(){E(l<Math.ceil(Date.now()/1e3));var e=setInterval((function(){E(l<Math.ceil(Date.now()/1e3))}),3e4);return function(){return clearInterval(e)}}),[l]);var P,D,F,H=function(){return new Date(1e3*s.endDate).toLocaleString()},z=function(e){return Number(Ne.convertWeiToEth(e)).toFixed(3)+" ETH"},_=Object(a.useMemo)((function(){var e;return(null===(e=s.bids)||void 0===e?void 0:e.findIndex((function(e){return e.bidder===c})))>=0}),[s.bids,c]);return n&&!s.running&&(P=Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("p",{style:{maxWidth:"800px"},children:"You can sell your CryptLandscape by starting an auction. Everyone can bid for you CryptoLandscape until a fixed date. Afterwards, you (or the highest bidder) can complete the auction by transfering the CryptoLandscape and the coins."}),Object(A.jsx)("br",{}),!T&&Object(A.jsx)(Ee.a,{appearance:"ghost",disabled:s.running||T,onClick:function(){return O(!0)},children:"Start Auction"}),T&&Object(A.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"nowrap"},children:[Object(A.jsx)(o.a,{}),"\xa0",Object(A.jsx)("span",{children:"Auction is being started..."})]}),Object(A.jsx)("br",{})]})),s.running&&!B&&(D=Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("br",{}),Object(A.jsxs)(Pe.a,{layout:"inline",children:[Object(A.jsxs)(De.a,{children:[Object(A.jsx)(Fe.a,{disabled:M,value:b,step:.001,onChange:j,min:r()}),v&&Object(A.jsx)(He.a,{color:"red",children:v})]}),Object(A.jsx)(De.a,{children:Object(A.jsx)(Ee.a,{appearance:"ghost",disabled:M,loading:M,onClick:function(){if(b<=Ne.convertWeiToEth(d)){var e=Ne.convertWeiToEth(d);g("Your bid is to small. Highest Bid is currently ".concat(e)),console.log("new amount",r()),j(r())}else{g(null);try{Ne.bid(t.landscapeId,b)}catch(n){ge.a.error({content:"Bid transaction failed. Please try again."})}}},children:"Bid"})})]})]})),s.running&&(n||c===u)&&(F=Object(A.jsx)(ze.a,{content:B,children:Object(A.jsx)(Ee.a,{appearance:"ghost",disabled:!B||S,loading:S,onClick:function(){if(B)try{Ne.endAuction(t.landscapeId)}catch(n){ge.a.error({content:"Ending auction failed. Please try again."})}else e=l,ke.a.error({title:"Please wait until Auction finished",duration:2e3,description:Object(A.jsxs)("p",{style:{width:320},rows:3,children:["Auction ends at ",new Date(1e3*e).toLocaleString()]})});var e},children:"End Auction"})})),Object(A.jsxs)("div",{children:[Object(A.jsx)("h4",{children:"Auction"}),!s.running&&!n&&Object(A.jsxs)("p",{children:[Object(A.jsx)(_e.a,{icon:"info"}),"\xa0There is no ongoing auction for this beauty"]}),P,s.running&&Object(A.jsx)("table",{className:"auction-info-table",children:Object(A.jsxs)("tbody",{children:[Object(A.jsxs)("tr",{children:[Object(A.jsxs)("td",{children:[Object(A.jsx)(_e.a,{icon:"clock-o"})," End date"]}),Object(A.jsx)("td",{children:Object(A.jsx)(Ye,{pointInTimeSeconds:s.endDate,ifFinished:"Auction closed (Ended at ".concat(H(s.EndDate),")")})})]}),Object(A.jsxs)("tr",{children:[Object(A.jsxs)("td",{children:[Object(A.jsx)(_e.a,{icon:"tag"})," Highest bid"]}),Object(A.jsxs)("td",{children:[z(s.highestBid),"\xa0\xa0",s.highestBidder===c&&Object(A.jsx)(He.a,{color:"green",children:"It's you!"}),s.highestBidder!==c&&_&&Object(A.jsx)(He.a,{color:"red",children:"You have been outbid!"})]})]})]})}),D,F,s.running&&Object(A.jsxs)("div",{children:[Object(A.jsx)("br",{}),Object(A.jsx)("h5",{children:"Bids"}),Object(A.jsx)(Ue.a,{children:(s.bids||[]).map((function(e){return Object(A.jsxs)(Ue.a.Item,{children:[Object(A.jsx)("i",{children:H(e.time)}),": ",Object(A.jsx)("strong",{children:z(e.amount)})," by ",Object(A.jsx)(We,{address:e.bidder})]},e.time)}))}),0===(s.bids||[]).length&&Object(A.jsx)("p",{children:"No bids yet"})]}),Object(A.jsx)(qe,{setShowModal:O,showModal:m,landscape:t})]})}var Ke=n(820),Qe=n(148),Xe=n(369);function Ze(e){return e.processing?Object(A.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(A.jsx)(o.a,{}),Object(A.jsx)("p",{style:{display:"inline-block",marginLeft:3,color:"grey"},children:"Change is being processed..."})]}):null}function $e(e){var t=e.landscapeId,n=e.name,r=e.isUserOwner,c=I(t,"isChangingName"),s=Object(Be.a)(c,3),i=s[0],o=s[1],d=s[2],u=I(t,"processingNameChange"),l=Object(Be.a)(u,1)[0],p=Object(a.useState)(n),h=Object(Be.a)(p,2),b=h[0],j=h[1],f=function(){var e=Object(H.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b===n){e.next=10;break}return e.prev=1,e.next=4,Ne.changeName(t,b);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),ge.a.error("Could not change name"),console.error(e.t0);case 10:d();case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}();return i&&!l?Object(A.jsxs)(Ke.a,{children:[Object(A.jsx)(Qe.a,{value:b,onChange:j}),Object(A.jsx)(Ke.a.Button,{onClick:f,appearance:"ghost",children:Object(A.jsx)(_e.a,{icon:"check"})}),Object(A.jsx)(Ke.a.Button,{onClick:d,appearance:"ghost",children:Object(A.jsx)(_e.a,{icon:"close"})})]}):Object(A.jsxs)("div",{style:{display:"flex",flexWrap:"nowrap",flexDirection:"row",alignItems:"center"},children:[Object(A.jsx)("h3",{children:n}),Object(A.jsx)("div",{style:{flex:1,width:"auto"}}),Object(A.jsx)(Ze,{processing:l}),r&&!l&&Object(A.jsx)(Xe.a,{appearance:"ghost",onClick:function(){o(),j(n)},icon:Object(A.jsx)(_e.a,{icon:"pencil"})})]})}function et(e){var t=e.landscapeId,n=Object(a.useState)([]),r=Object(Be.a)(n,2),c=r[0],s=r[1],i=Object(a.useMemo)((function(){var e;return null===(e=c[c.length-1])||void 0===e?void 0:e.oldOwner}),[c]);return Object(a.useEffect)((function(){Object(H.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=s,e.next=4,Ne.loadOwnerHistory(t);case 4:if(e.t1=e.sent,e.t1){e.next=7;break}e.t1=[];case 7:e.t2=e.t1,(0,e.t0)(e.t2),e.next=14;break;case 11:e.prev=11,e.t3=e.catch(0),console.error(e.t3);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()}),[t]),null==c||0===c.length?null:Object(A.jsxs)("div",{children:[Object(A.jsx)("h3",{children:"Owner History"}),Object(A.jsxs)(Ue.a,{align:"left",children:[c.map((function(e,t){return Object(A.jsx)(tt,{time:e.time,newOwner:e.newOwner},t)})),Object(A.jsx)(Ue.a.Item,{time:"Lottery Win",children:Object(A.jsx)(We,{address:i})})]})]})}var tt=function(e){var t=e.newOwner,n=e.time,r=Object(a.useMemo)((function(){return null==n?" ":new Date(1e3*n).toLocaleString()}),[n]);return Object(A.jsx)(Ue.a.Item,{time:r,children:Object(A.jsx)(We,{address:t})})},nt=n(825);function at(e){var t=e.landscapeId,n=Object(a.useState)(),r=Object(Be.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(!1),o=Object(Be.a)(i,2),d=o[0],u=o[1],l=I(t,"processingOwnershipTransfer"),p=Object(Be.a)(l,1)[0],h=Object(a.useState)(!0),b=Object(Be.a)(h,2),j=b[0],f=b[1],y=function(){var e=Object(H.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!1),e.next=4,Ne.transferOwnership(t,c.newOwnerAddress);case 4:L({keyword:"my-landscapes"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),ge.a.error("Transfer failed"),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),m=function(){u(!1)};return Object(A.jsxs)("div",{children:[Object(A.jsx)("h4",{children:"Transfer ownership"}),Object(A.jsxs)(Pe.a,{layout:"inline",onChange:s,children:[Object(A.jsxs)(De.a,{children:[Object(A.jsx)(Ve.a,{children:"Address of new owner"}),Object(A.jsx)(nt.a,{name:"newOwnerAddress",size:"lg",errorMessage:j?null:"Invalid target address"})]}),Object(A.jsx)(Ee.a,{disabled:p,appearance:"ghost",onClick:function(){c&&""!==c.newOwnerAddress&&Ne.isValidAddress(c.newOwnerAddress)?(u(!0),f(!0)):f(!1)},children:"Transfer"}),Object(A.jsx)(Ze,{processing:p})]}),Object(A.jsxs)(Je.a,{backdrop:"static",show:d,onHide:m,size:"xs",children:[Object(A.jsxs)(Je.a.Body,{children:[Object(A.jsx)(_e.a,{icon:"remind",style:{color:"#ffb300",fontSize:60}}),"  ",Object(A.jsx)("br",{}),"This action will transfer ownership of this landscape to new address:",Object(A.jsx)("pre",{children:(c||{}).newOwnerAddress}),"This operation cannot be undone."]}),Object(A.jsxs)(Je.a.Footer,{children:[Object(A.jsx)(Ee.a,{onClick:y,appearance:"primary",color:"red",children:"Transfer"}),Object(A.jsx)(Ee.a,{onClick:m,appearance:"subtle",children:"Cancel"})]})]})]})}n(793);function rt(e){var t=e.landscape,n=function(e){var t,n=Object(i.c)((function(e){return e.app.ethAddress}));return(null===(t=e.owner)||void 0===t?void 0:t.toLowerCase())===(null===n||void 0===n?void 0:n.toLowerCase())}(t);return Object(a.useEffect)((function(){Object(H.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.triggerDetailLoad(t.landscapeId,t.auction.auctionId);case 2:case"end":return e.stop()}}),e)})))()}),[t.landscapeId,t.auction.auctionId,t.owner]),Object(A.jsxs)("div",{className:"landscape-detail-view",children:[Object(A.jsx)(M,{dna:t.dna,style:{display:"flex",justifyContent:"center",height:"30vh"}}),Object(A.jsxs)("div",{style:{paddingLeft:"2em",paddingRight:"1em",marginTop:"0.2em"},children:[Object(A.jsx)($e,{landscapeId:t.landscapeId,name:t.name,isUserOwner:n}),Object(A.jsx)("table",{className:"landscape-data-table",children:Object(A.jsxs)("tbody",{children:[Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:"DNA:"}),Object(A.jsx)("td",{children:t.dna})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:"Owner:"}),Object(A.jsx)("td",{children:Object(A.jsx)(We,{address:t.owner})})]})]})}),Object(A.jsx)(z.a,{}),n&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(at,{landscapeId:t.landscapeId}),Object(A.jsx)(z.a,{})]}),Object(A.jsx)(Ge,{landscape:t,isUserOwner:n}),Object(A.jsx)(z.a,{}),Object(A.jsx)(et,{landscapeId:t.landscapeId})]})]})}function ct(e){var t=e.landscapeId,n=Object(i.c)((function(e){return e.landscapes})),a=n.landscapes,r=n.loading,c=a[Number(t)];return r?Object(A.jsx)(o.a,{size:"lg",center:!0}):null==c?Object(A.jsxs)("h2",{children:["Landscape with id ",t," not found"]}):Object(A.jsx)(rt,{landscape:c})}var st=n(824),it=n(836);function ot(){var e=Object(a.useState)(),t=Object(Be.a)(e,2),n=t[0],r=t[1],c=Object(i.c)((function(e){return e.lottery.showWithdrawModal})),s=function(){ve.dispatch(fe(!1))},o=it.a.Types.StringType,d=it.a.Model({name:o().isRequired("This field is required.")});return Object(A.jsxs)(Je.a,{show:c,onHide:s,size:"xs",children:[Object(A.jsx)(Je.a.Header,{children:Object(A.jsx)(Je.a.Title,{children:"\ud83e\udd73\ud83c\udf8a\ud83c\udf89\ud83c\udf8a\ud83e\udd73\ud83c\udf89\ud83c\udf8a\ud83c\udf89\ud83e\udd73\ud83c\udf8a\ud83c\udf89\ud83c\udf8a\ud83e\udd73"})}),Object(A.jsxs)(Je.a.Body,{children:[Object(A.jsx)("p",{style:{textAlign:"center"},children:"\ud83e\udd73\ud83c\udf8a\ud83c\udf89\ud83c\udf8a\ud83e\udd73\ud83c\udf89\ud83c\udf8a\ud83c\udf89\ud83e\udd73\ud83c\udf8a\ud83c\udf89\ud83c\udf8a\ud83e\udd73\ud83c\udf89\ud83c\udf8a\ud83c\udf89\ud83c\udf8a\ud83c\udf89"}),Object(A.jsx)("p",{children:"Congratulations, you have won a CryptoLandscape \ud83e\udd73\ud83e\udd73"}),Object(A.jsx)("br",{}),Object(A.jsx)(Pe.a,{model:d,onChange:r,fluid:!0,children:Object(A.jsxs)(De.a,{children:[Object(A.jsx)(Ve.a,{children:"Name"}),Object(A.jsx)(nt.a,{name:"name"})]})}),Object(A.jsx)("p",{style:{textAlign:"center",margin:"0.3em"},children:"\ud83e\udd73\ud83c\udf8a\ud83c\udf89\ud83c\udf8a\ud83e\udd73\ud83c\udf89\ud83c\udf8a\ud83c\udf89\ud83e\udd73\ud83c\udf8a\ud83c\udf89\ud83c\udf8a\ud83e\udd73\ud83c\udf89\ud83c\udf8a\ud83c\udf89\ud83c\udf8a\ud83c\udf89"})]}),Object(A.jsxs)(Je.a.Footer,{children:[Object(A.jsx)(Ee.a,{appearance:"primary",onClick:function(){Ne.collectWin(n.name),ve.dispatch(fe(!1))},children:"Submit"}),Object(A.jsx)(Ee.a,{onClick:s,appearance:"subtle",children:"Cancel"})]})]})}function dt(){var e=Object(i.c)((function(e){return e.lottery.locked})),t=Object(i.c)((function(e){return e.lottery.adminLocked})),n=Object(i.c)((function(e){return e.lottery.withdrawLocked})),a=Object(i.c)((function(e){return e.app.owner})),r=Object(i.c)((function(e){return e.lottery.myShares})),c=Object(i.c)((function(e){return e.lottery.totalShares})),s=Object(i.c)((function(e){return e.lottery.participants})),o=Object(i.c)((function(e){return e.lottery.availableWinWithdrawals})),d=Object(i.c)((function(e){return e.lottery.selectedShares}));return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(ot,{}),Object(A.jsxs)("div",{style:{padding:"0.1em"},children:[Object(A.jsx)("h4",{children:"Lottery"}),Object(A.jsx)(Fe.a,{value:d,min:1,max:10,step:1,onChange:function(e){return ve.dispatch(Oe(e))},disabled:e}),Object(A.jsx)("span",{children:"1 share = 0.0005 ETH"}),Object(A.jsx)("br",{}),Object(A.jsx)("br",{}),Object(A.jsxs)(Ee.a,{appearance:"ghost",block:!0,onClick:function(){Ne.participateLottery(d)},disabled:e,loading:e,children:[Object(A.jsx)(_e.a,{name:"ticket"})," Buy lottery shares"]}),Object(A.jsx)("br",{}),Object(A.jsx)("table",{style:{width:"100%"},children:Object(A.jsxs)("tbody",{children:[Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:"My shares"}),Object(A.jsx)("td",{style:{width:"50%",textAlign:"left"},children:r})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:"Win Chance:"}),Object(A.jsx)("td",{children:Object(A.jsxs)("strong",{children:[c>0?(r/c*100).toFixed(2):"0.00","%"]})})]})]})}),Object(A.jsx)("br",{}),Object(A.jsxs)("h4",{style:{visibility:o>0?"visible":"hidden"},children:[Object(A.jsx)("p",{children:"You won a price!"}),Object(A.jsx)(Ee.a,{appearance:"ghost",onClick:function(){ve.dispatch(fe(!0))},block:!0,disabled:n,loading:n,children:"Claim CryptoLandscape"})]}),a&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(z.a,{}),Object(A.jsx)("h4",{children:"ADMIN FUNCTIONS"}),Object(A.jsx)("br",{}),Object(A.jsx)("table",{style:{width:"100%"},children:Object(A.jsxs)("tbody",{children:[Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:"# of participants:"}),Object(A.jsx)("td",{children:null===s||void 0===s?void 0:s.length})]}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:"# of shares:"}),Object(A.jsxs)("td",{children:[c," (",(5e-4*c).toFixed(4)," ETH)"]})]})]})}),Object(A.jsx)("br",{}),Object(A.jsx)(Ee.a,{appearance:"ghost",block:!0,loading:t,disabled:t,onClick:function(){s.length>0?Ne.resolveLottery():ge.a.error({content:"No participants yet",duration:2e3})},children:"Resolve lottery"}),Object(A.jsx)("br",{}),Object(A.jsx)("span",{children:"Participants"}),Object(A.jsxs)(st.a,{size:"sm",bordered:!1,hover:!1,sortable:!1,children:[s.map((function(e){return Object(A.jsx)(st.a.Item,{children:e.substr(0,6)+"..."+e.substr(e.length-4,e.length)},e)})),0===s.length&&Object(A.jsx)("span",{children:"No participants yet"})]})]})]})]})}function ut(){var e=Object(i.c)((function(e){return e.app.withdrawableEth})),t=Object(i.c)((function(e){return e.app.isWithdrawing}));return Object(A.jsxs)("div",{children:[Object(A.jsx)("h4",{children:"Withdrawal"}),Object(A.jsx)("table",{style:{width:"100%"},children:Object(A.jsx)("tbody",{children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:"Credit:"}),Object(A.jsxs)("td",{style:{width:"50%",textAlign:"left"},children:[Number(e).toFixed(3)," ETH"]})]})})}),Object(A.jsx)("br",{}),Object(A.jsx)(Ee.a,{block:!0,appearance:"ghost",onClick:function(){Ne.withdraw()},disabled:t,loading:t,children:"Withdraw"})]})}function lt(){var e=k(Object(i.c)((function(e){return e.app.ethAddress}))),t=e.myLandscapes,n=e.loading,a=T(t);return n?Object(A.jsx)(o.a,{size:"lg",center:!0}):Object(A.jsx)(W,{landscapes:a})}function pt(){var e=k(Object(i.c)((function(e){return e.app.ethAddress}))),t=e.myLandscapes;return e.loading?Object(A.jsx)(o.a,{size:"lg",center:!0}):Object(A.jsx)(W,{landscapes:t})}var ht=n(821),bt=n(822);function jt(e){var t=Object(i.c)((function(e){var t;return null===(t=e.app.navState)||void 0===t?void 0:t.keyword})),n=function(t){return function(n){e.navigate({keyword:t})}};return Object(A.jsx)(ht.a,{children:Object(A.jsx)(ht.a.Body,{children:Object(A.jsxs)(bt.a,{children:[Object(A.jsx)(bt.a.Item,{active:"my-landscapes"===t,onSelect:n("my-landscapes"),children:"My Landscapes"}),Object(A.jsx)(bt.a.Item,{active:"my-auctions"===t,onSelect:n("my-auctions"),children:"My Auctions"}),Object(A.jsx)(bt.a.Item,{active:"all-landscapes"===t,onSelect:n("all-landscapes"),children:"All Landscapes"}),Object(A.jsx)(bt.a.Item,{active:"all-auctions"===t,onSelect:n("all-auctions"),children:"All Auctions"})]})})})}function ft(){var e=Object(i.c)((function(e){return e.app.navState}));return Object(A.jsxs)("h3",{children:["Page not found: ",e.keyword]})}var yt=n(837);Ne.init();var mt=function(e){switch(e.keyword){case"my-auctions":return Object(A.jsx)(lt,{});case"all-auctions":return Object(A.jsx)(E,{});case"my-landscapes":return Object(A.jsx)(pt,{});case"all-landscapes":return Object(A.jsx)(P,{});case"landscape-detail":return Object(A.jsx)(ct,{landscapeId:e.landscapeId});case"account-detail":return Object(A.jsx)(B,{address:e.address});default:return Object(A.jsx)(ft,{})}};var Ot=function(){var e=Object(i.c)((function(e){return!e.app.initialized})),t=Object(i.c)((function(e){return e.app.error})),n=Object(i.c)((function(e){return e.app.navState})),a=function(e){L(e)};return t?Object(A.jsx)("div",{style:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:Object(A.jsx)(yt.a,{showIcon:!0,type:"error",title:"Error",description:t})}):e?Object(A.jsx)(o.a,{size:"lg",center:!0,content:Object(A.jsx)("span",{children:"Please allow access to MetaMask"})}):Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)("div",{className:"content-wrapper",children:[Object(A.jsxs)("div",{className:"sidebar",children:[Object(A.jsx)("h1",{style:{cursor:"pointer",fontSize:"2em"},onClick:function(e){e.preventDefault(),a({keyword:"my-landscapes"})},children:"CryptoLandscapes"}),Object(A.jsx)(z.a,{}),Object(A.jsx)(dt,{}),Object(A.jsx)(z.a,{}),Object(A.jsx)(ut,{})]}),Object(A.jsxs)("div",{className:"main-content",children:[Object(A.jsx)(jt,{navigate:a}),Object(A.jsx)("div",{className:"current-page",children:mt(n)})]})]})})};n(810);s.a.render(Object(A.jsx)(r.a.StrictMode,{children:Object(A.jsx)(i.a,{store:ve,children:Object(A.jsx)(Ot,{})})}),document.getElementById("react-root"))}},[[811,1,2]]]);
//# sourceMappingURL=main.d06f7ad0.chunk.js.map